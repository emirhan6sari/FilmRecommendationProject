<!DOCTYPE html>
<html>
<head>
    <title>Film Tavsiye Sistemi</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='index_style.css') }}">
    <script src="{{ url_for('static', filename='index_script.js') }}"></script>
</head>
<body>
    <h1>ğŸ¬ Film Tavsiye Sistemi</h1>

    <!--  1. Film TÃ¼rÃ¼ne GÃ¶re Ã–neri -->
    <h2>1. Film TÃ¼rÃ¼ne GÃ¶re Ã–neri</h2>
    <form action="/recommend_by_genre" method="POST">
        <label for="movies">Ä°zlediÄŸiniz filmleri seÃ§in:</label>
        <select name="movies" id="movies" multiple required>
            {% for movie in movies %}
                <option value="{{ movie['title'] }}">{{ movie['title'] }}</option>
            {% endfor %}
        </select>
        <button type="submit">Ã–neri Al</button>
    </form>

    <!-- SeÃ§ilen filmleri listeleme Ã¶zelliÄŸi -->
    <h3>SeÃ§tiÄŸiniz Filmler:</h3>
    <ul id="selected-movies-list"></ul>

    <!--  2. KullanÄ±cÄ± BazlÄ± (KNN) Ã–neri -->
    <h2>2. KullanÄ±cÄ± BazlÄ± KNN Ã–nerisi</h2>
    <form action="/knn_recommend" method="POST">
        <label for="user_id">KullanÄ±cÄ± ID girin:</label>
        <input type="number" name="user_id" required>
        <button type="submit">Ã–neri Al</button>
    </form>

    <!--  JavaScript ile SeÃ§ilen Filmleri Listeleme -->
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        let movieSelect = document.getElementById("movies");
        let selectedMoviesList = document.getElementById("selected-movies-list");

        function updateSelectedMovies() {
            selectedMoviesList.innerHTML = "";  // Listeyi temizle
            let selectedOptions = Array.from(movieSelect.selectedOptions);
            selectedOptions.forEach(option => {
                let li = document.createElement("li");
                li.textContent = option.value;  // SeÃ§ilen filmin adÄ±nÄ± ekle
                
                // âŒ Butonu ile film kaldÄ±rma Ã¶zelliÄŸi
                let removeButton = document.createElement("button");
                removeButton.textContent = "âŒ";
                removeButton.style.marginLeft = "10px";
                removeButton.onclick = function() {
                    option.selected = false;  // SeÃ§imi kaldÄ±r
                    updateSelectedMovies();  // Listeyi gÃ¼ncelle
                };

                li.appendChild(removeButton);
                selectedMoviesList.appendChild(li);
            });
        }

        movieSelect.addEventListener("change", updateSelectedMovies);
    });
    </script>

</body>
</html>
